!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e=function(n,i){var o=t(window),r=this,s=t(),a=window.devicePixelRatio>1,d=!1,l="string"==typeof(n=t.extend(!0,{threshold:0,sizePattern:/{{SIZE}}/gi,getSource:function(e){var i,o,r=e.data();r.pattern&&r.widths&&t.isArray(r.widths)?(i=(i=a?r.patternRetina:r.pattern)||r.pattern,"object"==typeof r.widths[0]?(o=function(){for(var n=t.map(r.widths,function(t){return t.size}),i=u(e.width(),n),o=r.widths.length-1;o>=0;o--)if(r.widths[o].size===i)return r.widths[o].slug}(),i=i.replace(n.sizePattern,o)):i=i.replace(n.sizePattern,u(e.width(),r.widths))):i=(i=a?r.srcRetina:r.src)||r.src;return i},event:"scroll",scrollThrottle:250,sizeOffsetPercent:0,setSourceMode:!0},n)).event&&0===n.event.indexOf("scroll");function c(t){t.addClass("ll-loaded").removeClass("ll-notloaded"),t.trigger("loaded"),"function"==typeof i&&i.call(t)}function h(){r.one("laziestloader",function(){var e,i=t(this);i.data().ratio&&g.call(this),n.setSourceMode&&(e=n.getSource(i))&&this.getAttribute("src")!==e&&this.setAttribute("src",e),i.addClass("ll-loadstarted"),!n.setSourceMode||"IMG"!==this.nodeName&&"VIDEO"!==this.nodeName&&"AUDIO"!==this.nodeName?c(i):"IMG"===this.nodeName?this.onload=function(){c(i)}:this.onloadstart=function(){c(i)}})}var u=e.bestFit=function(t,e){var i=e[e.length-1],o=e.length,r=t*(n.sizeOffsetPercent/100);for(e.sort(function(t,e){return t-e});o--;)t-r<=e[o]&&(i=e[o]);return i};function f(){var e=document.documentElement,i=window.innerHeight||e.clientHeight,o=window.innerWidth||e.clientWidth,a=n.threshold,d=r.not(s).filter(function(){if(!t(this).is(":hidden")){var e=t(this)[0].getBoundingClientRect();return e.bottom+a>0&&e.right+a>0&&e.left<o+a&&e.top<i+a}});d.trigger("laziestloader"),s.add(d)}function g(){var e=t(this),n=e.data();n.ratio=n.ratio||n.heightMultiplier,n.ratio&&e.css({height:Math.round(e.width()*n.ratio)})}return r.addClass("ll-init ll-notloaded").each(g),h(),l?(o.on("scroll",function(){d=!0}),setInterval(function(){d&&(d=!1,f())},n.scrollThrottle)):"function"==typeof n.event?n.event(f):o.on(n.event,function(){f()}),o.on("resize",function(){s=t(),r.off("laziestloader"),h(),f()}),t(document).ready(function(){f()}),this};t.fn.laziestloader=e});
