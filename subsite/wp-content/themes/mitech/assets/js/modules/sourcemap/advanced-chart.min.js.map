{"version":3,"sources":["advanced-chart.js"],"names":["jQuery","document","ready","$","font","data","legendClickCallback","event","target","window","srcElement","nodeName","parentElement","parent","chartId","parseInt","classList","split","chart","Chart","instances","index","Array","prototype","slice","call","children","indexOf","item","getDatasetMeta","hidden","add","remove","update","defaults","global","defaultFontFamily","defaultFontSize","defaultFontColor","vcwaypoint","self","this","element","$el","settings","legendEnable","legendClickable","dataString","find","html","JSON","parse","ex","$canvas","type","chartLegends","generateLegend","each","on","destroy","offset"],"mappings":"AAAAA,OAAAC,UAAAC,MAAA,SAAAC,gBAGA,IAAAC,EAAAD,EAAA,QAAAE,KAAA,QA2CA,SAAAC,EAAAC,GAIA,IADA,IAAAC,GAFAD,EAAAA,GAAAE,OAAAF,OAEAC,QAAAD,EAAAG,WACA,OAAAF,EAAAG,UACAH,EAAAA,EAAAI,cAEA,IAAAC,EAAAL,EAAAI,cACAE,EAAAC,SAAAF,EAAAG,UAAA,GAAAC,MAAA,KAAA,GAAA,IACAC,EAAAC,MAAAC,UAAAN,GACAO,EAAAC,MAAAC,UAAAC,MAAAC,KAAAZ,EAAAa,UAAAC,QAAAnB,GAEAoB,EADAV,EAAAW,eAAA,GACAxB,KAAAgB,GAEA,OAAAO,EAAAE,SAAA,IAAAF,EAAAE,QACAF,EAAAE,QAAA,EACAtB,EAAAQ,UAAAe,IAAA,YAEAvB,EAAAQ,UAAAgB,OAAA,UACAJ,EAAAE,OAAA,MAEAZ,EAAAe,SA9DAd,MAAAe,SAAAC,OAAAC,kBAAAhC,EACAe,MAAAe,SAAAC,OAAAE,gBAAA,GACAlB,MAAAe,SAAAC,OAAAG,iBAAA,OAEAnC,EAAA,gBAAAoC,WAAA,WACA,IAAAC,EAAAC,KAAAC,SAAAD,KACAE,EAAAxC,EAAAqC,GAEAI,EAAAD,EAAAtC,OACAwC,KAAAD,EAAAC,cAAA,KAAAD,EAAAC,cACAC,KAAAF,EAAAE,iBAAA,KAAAF,EAAAE,iBAEAC,EAAAJ,EAAAK,KAAA,eAAAC,OACA5C,GAAA,EACA,IACAA,EAAA6C,KAAAC,MAAAJ,GACA,MAAAK,IAEA/C,IACAgD,EAAAV,EAAAK,KAAA,UAEA9B,EAAA,IAAAC,MAAAkC,EAAAhD,GAEA,QAAAA,EAAAiD,MAAAT,KACAU,EAAAZ,EAAAK,KAAA,mBAEAC,KAAA/B,EAAAsC,kBAEAV,GACAS,EAAAP,KAAA,MAAAS,KAAA,WACAtD,EAAAsC,MAAAiB,GAAA,QAAApD,OAMAmC,KAAAkB,WACA,CACAC,OAAA","file":"../../advanced-chart.min.js","sourcesContent":["jQuery( document ).ready( function( $ ) {\n\t'use strict';\n\n\tvar font = $( 'body' ).data( 'font' );\n\n\tChart.defaults.global.defaultFontFamily = font;\n\tChart.defaults.global.defaultFontSize = 15;\n\tChart.defaults.global.defaultFontColor = '#222';\n\n\t$( '.tm-js-chart' ).vcwaypoint( function() {\n\t\tvar self = this.element ? this.element : this;\n\t\tvar $el = $( self );\n\n\t\tvar settings = $el.data();\n\t\tvar legendEnable = settings.legendEnable && settings.legendEnable == '1' ? true : false;\n\t\tvar legendClickable = settings.legendClickable && settings.legendClickable == '1' ? true : false;\n\n\t\tvar dataString = $el.find( '.chart-data' ).html();\n\t\tvar data = false;\n\t\ttry {\n\t\t\tdata = JSON.parse( dataString );\n\t\t} catch ( ex ) {\n\t\t}\n\t\tif ( data ) {\n\t\t\tvar $canvas = $el.find( 'canvas' );\n\n\t\t\tvar chart = new Chart( $canvas, data );\n\n\t\t\tif ( data.type === 'pie' && legendEnable ) {\n\t\t\t\tvar chartLegends = $el.find( '.chart-legends' );\n\n\t\t\t\tchartLegends.html( chart.generateLegend() );\n\n\t\t\t\tif ( legendClickable ) {\n\t\t\t\t\tchartLegends.find( 'li' ).each( function() {\n\t\t\t\t\t\t$( this ).on( 'click', legendClickCallback );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.destroy();\n\t}, {\n\t\toffset: '90%',\n\t} );\n\n\tfunction legendClickCallback( event ) {\n\t\tevent = event || window.event;\n\n\t\tvar target = event.target || event.srcElement;\n\t\twhile ( target.nodeName !== 'LI' ) {\n\t\t\ttarget = target.parentElement;\n\t\t}\n\t\tvar parent = target.parentElement;\n\t\tvar chartId = parseInt( parent.classList[ 0 ].split( \"-\" )[ 0 ], 10 );\n\t\tvar chart = Chart.instances[ chartId ];\n\t\tvar index = Array.prototype.slice.call( parent.children ).indexOf( target );\n\t\tvar meta = chart.getDatasetMeta( 0 );\n\t\tvar item = meta.data[ index ];\n\n\t\tif ( item.hidden === null || item.hidden === false ) {\n\t\t\titem.hidden = true;\n\t\t\ttarget.classList.add( 'hidden' );\n\t\t} else {\n\t\t\ttarget.classList.remove( 'hidden' );\n\t\t\titem.hidden = null;\n\t\t}\n\t\tchart.update();\n\t}\n} );\n"]}